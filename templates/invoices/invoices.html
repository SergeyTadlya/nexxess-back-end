{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
      <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/invoices.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/dynamic_search.css' %}">

{% endblock  %}

{% block title %} Invoices {% endblock %}

{% block left_menu %}
    <div class="aside-info">
      <div class="aside-info__box">
        <div class="aside-info__box-top">
          <img class="aside-info__top-img" src="{% static 'images/important.svg' %}" alt="icon">
          <h6 class="aside-info__top-title">Important</h6>
          <p class="aside-info__top-number">3</p>
        </div>
        <ul class="aside-info__box-list">
            <li class="aside-info__box-item">
                <p class="aside-info__box-text">My current service:</p>
                <p class="aside-info__box-money">Services Name</p>
            </li>
          <li class="aside-info__box-item">
            <p class="aside-info__box-text">New sercises this month:</p>
            <p class="aside-info__box-money">2</p>
          </li>
          <li class="aside-info__box-item">
            <p class="aside-info__box-text">Actual discounts:</p>
            <p class="aside-info__box-money">10%</p>
          </li>
        </ul>
      </div>
    </div>

    <div class="aside-filter">
      <div class="aside-filter__accordion">
        <div  class="aside-filter__accordion-top" id="aside-filter__accordion-top">
          <img class="aside-filter__top-img" src="{% static 'images/filter.svg' %}" alt="icon">
          <h6 class="aside-filter__top-title">Status</h6>
          <img class="aside-filter__top-arrow" src="{% static 'images/chevron-down.svg' %}" alt="icon">
        </div>

        <ul class="aside-filter__accordion-list">
        {% for invoice_status in invoices_statuses %}
          <li class="aside-filter__accordion-item" id="statuses_amount" value="{{ statuses_amount }}">
            <label class="aside-filter__accordion-label" for="{{ invoice_status.id }}">
                <input id="{{ invoice_status.id }}" class="aside-filter__accordion-check" value="{{ invoice_status.name }}" type="checkbox">
                {{ invoice_status.name }}
              </label>
            <p class="aside-filter__accordion-number">{{ invoice_status.number }}</p>
          </li>
        {% endfor %}
        </ul>
      </div>

      <div class="aside-filter__accordion">
        <div id="aside-filter__accordion-top" class="aside-filter__accordion-top">
          <img class="aside-filter__top-img" src="{% static 'images/calendar.svg' %}" alt="icon">
          <h6 class="aside-filter__top-title">Calendar</h6>
          <img class="aside-filter__top-arrow" src="{% static 'images/chevron-down.svg' %}" alt="icon">
        </div>

      <ul class="aside-filter__accordion-list">
          <li class="aside-filter__accordion-item">
            <p class="aside-filter__accordion-text">From:</p>
            <div class="aside-filter__accordion-box">
              <input id="fromDatePicker" class="aside-filter__accordion-date"  type="text" readonly="readonly" placeholder="select a date">
            </div>
          </li>
          <li class="aside-filter__accordion-item">
            <p class="aside-filter__accordion-text">To:</p>
            <div class="aside-filter__accordion-box">
              <input id="toDatePicker" class="aside-filter__accordion-date"  type="text" readonly="readonly" placeholder="select a date">
            </div>
          </li>
        </ul>
      </div>
        <button class="aside-filter__accordion-btn" id="search-btn">Search</button>
    </div>
{% endblock left_menu %}

{% block content %}
    <div class="content__inner">
        <div class="content__top">
            <h1 class="title content__top-title">Invoices history</h1>
            <div class="content__top-search">
                <img class="content__top-img" src="{% static 'images/main/Search.svg' %}" alt="Search">
                <input class="content__top-input" type="text" id="search-input" placeholder="Search">
            </div>
        </div>
        <button class="content__filter-btn" type="button">
            <img class="content__filter-img" src="{% static 'images/filter-btn.svg' %}" alt="filter-icon">
            Filter
        </button>
        <ul class="content__titles">
            <li class="content__titles-item">Invoice</li>
            <li class="content__titles-item">Invoice Date</li>
            <li class="content__titles-item">Due Date</li>
            <li class="content__titles-item">Total</li>
            <li class="content__titles-item">Status</li>
            <li class="content__titles-item">Action</li>
        </ul>
        <div id="div-invoices">
            {% for invoice_date in invoices_dates %}
                <div class="content__body">
                    <p class="content__body-titleDate">{{ invoice_date }}</p>
                    {% for invoice in invoices %}
                        {% if invoice.date == invoice_date %}
                            <ul class="content__body-list">
                                <li  class="content__body-box" >
                                    <ul class="content__body-titles">
                                        <li class="content__body-title">Invoice</li>
                                        <li class="content__body-title">Status</li>
                                        <li class="content__body-title">Invoice Date</li>
                                        <li class="content__body-title">Due Date</li>
                                        <li class="content__body-title">Total</li>
                                    </ul>
                                    <ul class="content__body-items">
                                        <p class="content__body-number">{{ invoice.id }}</p>
                                        <li  class="content__body-item style--width">
                                            <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}" target="_blank">
                                                <img src="{% static 'images/invoices/print.svg' %}"  alt="print"></a>

                                              <a href="{% url 'invoice_detail' invoice.id %}"><p class="content__body-invoice" >{{ invoice.invoice_id }}</p></a></a>
                                        </li>
                                        <li  class="content__body-item style--width">
                                            <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}"  target="_blank">
                                                <p class="content__body-date">{{ invoice.date }}</p></a>
                                        </li>
                                        <li class="content__body-item style--width">
                                            <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}"  target="_blank">
                                                <p class="content__body-date">{{ invoice.due_date }}</p></a>
                                        </li>
                                        <li  class="content__body-item style--width">
                                            <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}"  target="_blank">
                                            <p class="content__body-money">{{ invoice.price }}</p></a>
                                        </li>
                                        <li  class="content__body-item style--width">
                                            <p class="content__body-status style--width font--{{ invoice.status.color }}">{{ invoice.status.value }}</p>
                                        </li>
                                        <li class="content__body-item style--width"><a class="button_pay" data-b24invoice="{{ invoice.invoice_id }}">Pay</a></li>
                                    </ul>
                                    <button class="content__body-btn">
                                        <img class="content__body-img" src="{% static 'images/chevron.svg' %}" alt="arrow">
                                    </button>
                                </li>
                            </ul>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </div>
    <div id="content__showing-box" class="content__showing-box">
        <p class="content__showing-text">Showing</p>
        <p id="content__showing-number" class="content__showing-number">10</p>
        <img class="content__showing-img" src="{% static 'images/invoices/arrow-drop-down.svg' %}" alt="icon">
        <p class="content__showing-numbers">of {{ invoices_number }}</p>
        <ul id="content__showing-list" class="content__showing-list">
          <li class="content__showing-item" id="10" value="10">10</li>
          <li class="content__showing-item" id="50" value="50">50</li>
          <li class="content__showing-item" id="100" value="100">100</li>
          <li class="content__showing-item" id="All" value="All">All</li>
        </ul>
    </div>
    <div class="content__pagination" id="invoices_pagination">
        {% if invoices.has_previous %}
            <a id="prev" class="content__pagination-arrow" href="?page={{ invoices.previous_page_number }}">
              <svg width="46" height="46" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M14.021 6.912a.69.69 0 0 1 0 .976L9.91 12l4.112 4.112a.69.69 0 0 1-.976.976l-4.6-4.6a.69.69 0 0 1 0-.976l4.6-4.6a.69.69 0 0 1 .976 0Z" clip-rule="evenodd"></path>
              </svg>
            </a>
        {% else %}
            <a id="prev" class="content__pagination-arrow" href="" style="pointer-events: none">
              <svg width="46" height="46" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M14.021 6.912a.69.69 0 0 1 0 .976L9.91 12l4.112 4.112a.69.69 0 0 1-.976.976l-4.6-4.6a.69.69 0 0 1 0-.976l4.6-4.6a.69.69 0 0 1 .976 0Z" clip-rule="evenodd"></path>
              </svg>
            </a>
        {% endif %}

        <div class="content__pagination-buttons">
            {% if invoices.has_other_pages %}
                {% for i in invoices.paginator.page_range %}
                    {% if invoices.number == i %}
                        <span class="content__pagination-button pagination--active">{{ i }}</span>
                    {% else %}
                        <a class="content__pagination-button" href="?page={{ i }}" >{{ i }}</a>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>

        {% if invoices.has_next %}
            <a id="next" class="content__pagination-arrow" href="?page={{ invoices.next_page_number }}">
              <svg width="46" height="46" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M9.979 6.912a.69.69 0 0 1 .976 0l4.6 4.6a.69.69 0 0 1 0 .976l-4.6 4.6a.69.69 0 1 1-.976-.976L14.091 12 9.98 7.888a.69.69 0 0 1 0-.976Z" clip-rule="evenodd"></path>
              </svg>
            </a>
        {% else %}
            <a id="next" class="content__pagination-arrow" href="" style="pointer-events: none">
              <svg width="46" height="46" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M9.979 6.912a.69.69 0 0 1 .976 0l4.6 4.6a.69.69 0 0 1 0 .976l-4.6 4.6a.69.69 0 1 1-.976-.976L14.091 12 9.98 7.888a.69.69 0 0 1 0-.976Z" clip-rule="evenodd"></path>
              </svg>
            </a>
        {% endif %}
    </div>
{% endblock content %}
{% block footer %}
<footer class="footer">
  <div class="container">
    <ul class="footer__list">
      <li class="footer__item">
        <div class="footer__social">
          <a class="footer__social-link" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0,0,256,256" width="100px" height="100px" fill-rule="nonzero"><g fill="#000000" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M25,3c-12.15,0 -22,9.85 -22,22c0,11.03 8.125,20.137 18.712,21.728v-15.897h-5.443v-5.783h5.443v-3.848c0,-6.371 3.104,-9.168 8.399,-9.168c2.536,0 3.877,0.188 4.512,0.274v5.048h-3.612c-2.248,0 -3.033,2.131 -3.033,4.533v3.161h6.588l-0.894,5.783h-5.694v15.944c10.738,-1.457 19.022,-10.638 19.022,-21.775c0,-12.15 -9.85,-22 -22,-22z"></path></g></g></svg>
          </a>
          <a class="footer__social-link" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0,0,256,256" width="96px" height="96px" fill-rule="nonzero"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.33333,5.33333)"><path d="M24,4c-11.046,0 -20,8.954 -20,20c0,11.046 8.954,20 20,20c11.046,0 20,-8.954 20,-20c0,-11.046 -8.954,-20 -20,-20z" fill="#000000"></path><path d="M36,17.12c-0.882,0.391 -1.999,0.758 -3,0.88c1.018,-0.604 2.633,-1.862 3,-3c-0.951,0.559 -2.671,1.156 -3.793,1.372c-2.418,-2.564 -8.207,-1.617 -8.207,3.628v2c-4,0 -7.9,-3.047 -10.327,-6c-2.254,3.807 1.858,6.689 2.327,7c-0.807,-0.025 -2.335,-0.641 -3,-1c0,0.016 0,0.036 0,0.057c0,2.367 1.661,3.974 3.912,4.422c-0.411,0.113 -0.912,0.521 -2.84,0.521c0.626,1.935 3.773,2.958 5.928,3c-2.617,2.029 -7.126,2.079 -8,1.977c8.989,5.289 22.669,0.513 21.982,-12.477c0.968,-0.682 1.36,-1.396 2.018,-2.38" fill="#ffffff"></path></g></g></svg>
          </a>
          <a class="footer__social-link" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0,0,256,256" width="100px" height="100px" fill-rule="nonzero"><g fill="#000000" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M16,3c-7.17,0 -13,5.83 -13,13v18c0,7.17 5.83,13 13,13h18c7.17,0 13,-5.83 13,-13v-18c0,-7.17 -5.83,-13 -13,-13zM37,11c1.1,0 2,0.9 2,2c0,1.1 -0.9,2 -2,2c-1.1,0 -2,-0.9 -2,-2c0,-1.1 0.9,-2 2,-2zM25,14c6.07,0 11,4.93 11,11c0,6.07 -4.93,11 -11,11c-6.07,0 -11,-4.93 -11,-11c0,-6.07 4.93,-11 11,-11zM25,16c-4.96,0 -9,4.04 -9,9c0,4.96 4.04,9 9,9c4.96,0 9,-4.04 9,-9c0,-4.96 -4.04,-9 -9,-9z"></path></g></g></svg>
          </a>
        </div>
      </li>
      <li class="footer__item">
        <p class="footer__item-text">
          Copyright 2000-2023, Nexxess International, All Rights Reserved
        </p>
      </li>
      <li class="footer__item">
        <a class="footer__btn-link" href="#">
          consultation
        </a>
      </li>
    </ul>
  </div>
</footer>
{% endblock footer %}

{% block extra_js %}
    <script src="{% static 'js/jquery-3.6.4.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/invoices.js' %}"></script>
    <script src="{% static 'js/calendar.js' %}"></script>
    <script src="{% static 'ajax/invoices_ajax.js' %}"></script>
{% endblock extra_js %}
