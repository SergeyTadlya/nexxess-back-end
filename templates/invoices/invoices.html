{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/invoices.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/dynamic_search.css' %}">
{% endblock  %}

{% block left_menu %}
<main class="main" xmlns="http://www.w3.org/1999/html">
    <div class="container">
        <div class="main__inner">
          <aside class="aside">
            <div class="aside-info">
              <div class="aside-info__box">
                <div class="aside-info__box-top">
                  <img class="aside-info__top-img" src="{% static 'images/important.svg' %}" alt="icon">
                  <h6 class="aside-info__top-title">Important</h6>
                  <p class="aside-info__top-number">2</p>
                </div>
                <ul class="aside-info__box-list">
                  <li class="aside-info__box-item">
                    <p class="aside-info__box-text">New servises this month:</p>
                    <p class="aside-info__box-money">2</p>
                  </li>
                  <li class="aside-info__box-item">
                    <p class="aside-info__box-text">Actual discounts:</p>
                    <p class="aside-info__box-money">10%</p>
                  </li>
                </ul>
              </div>
            </div>

            <div class="aside-filter">
              <div class="aside-filter__accordion">
                <div  class="aside-filter__accordion-top" id="aside-filter__accordion-top">
                  <img class="aside-filter__top-img" src="{% static 'images/filter.svg' %}" alt="icon">
                  <h6 class="aside-filter__top-title">Status</h6>
                  <img class="aside-filter__top-arrow" src="{% static 'images/chevron-down.svg' %}" alt="icon">
                </div>

                <ul class="aside-filter__accordion-list">
                  <li class="aside-filter__accordion-item">
                    <label class="aside-filter__accordion-label" for="status1">
                        <input id="status1" class="aside-filter__accordion-check"  name="check" type="checkbox" >
                        Paid
                      </label>
                    <p class="aside-filter__accordion-number">
                        {% if statuses.Paid %}
                            {{ statuses.Paid }}
                        {% else %}
                            {{ statuses.null }}
                        {% endif %}
                    </p>
                  </li>
                  <li class="aside-filter__accordion-item">
                      <label class="aside-filter__accordion-label" for="status2">
                        <input id="status2" class="aside-filter__accordion-check" name="check" type="checkbox">
                        Unpaid
                      </label>
                    <p class="aside-filter__accordion-number">
                        {% if statuses.Unpaid %}
                            {{ statuses.Unpaid }}
                        {% else %}
                            {{ statuses.null }}
                        {% endif %}
                    </p>
                  </li>
                  <li class="aside-filter__accordion-item">
                      <label class="aside-filter__accordion-label" for="status3">
                        <input id="status3" class="aside-filter__accordion-check" name="check" type="checkbox">
                        Canceled
                      </label>
                    <p class="aside-filter__accordion-number">
                        {% if statuses.Canceled %}
                            {{ statuses.Canceled }}
                        {% else %}
                            {{ statuses.null }}
                        {% endif %}
                    </p>
                  </li>
                  <li class="aside-filter__accordion-item">
                    <label class="aside-filter__accordion-label" for="status4">
                      <input id="status4" class="aside-filter__accordion-check"  name="check" type="checkbox">
                        Refunded
                      </label>
                    <p class="aside-filter__accordion-number">
                        {% if statuses.Refunded %}
                            {{ statuses.Refunded }}
                        {% else %}
                            {{ statuses.null }}
                        {% endif %}
                    </p>
                  </li>
                </ul>
              </div>

              <div class="aside-filter__accordion">
                <div id="aside-filter__accordion-top" class="aside-filter__accordion-top">
                  <img class="aside-filter__top-img" src="{% static 'images/calendar.svg' %}" alt="icon">
                  <h6 class="aside-filter__top-title">Calendar</h6>
                  <img class="aside-filter__top-arrow" src="{% static 'images/chevron-down.svg' %}" alt="icon">
                </div>

              <ul class="aside-filter__accordion-list">
                  <li class="aside-filter__accordion-item">
                    <p class="aside-filter__accordion-text">From:</p>
                    <div class="aside-filter__accordion-box">
                      <input id="fromDatePicker" class="aside-filter__accordion-date"  type="text" readonly="readonly" placeholder="select a date">
                    </div>
                  </li>
                  <li class="aside-filter__accordion-item">
                    <p class="aside-filter__accordion-text">To:</p>
                    <div class="aside-filter__accordion-box">
                      <input id="toDatePicker" class="aside-filter__accordion-date"  type="text" readonly="readonly" placeholder="select a date">
                    </div>
                  </li>
                </ul>
              </div>

               <div class="aside-filter__accordion">
                <div id="aside-filter__accordion-top" class="aside-filter__accordion-top">
                  <img class="aside-filter__top-img" src="{% static 'images/credit-card.svg' %}" alt="icon">
                  <h6 class="aside-filter__top-title">Payments</h6>
                  <img class="aside-filter__top-arrow" src="{% static 'images/chevron-down.svg' %}" alt="icon">
                </div>

                <ul class="aside-filter__accordion-list">
                  <li class="aside-filter__accordion-item">
                    <label class="aside-filter__accordion-label" for="payments1">
                        <input id="payments1" class="aside-filter__accordion-check"  name="payments" type="checkbox" >
                        Paypall
                      </label>
                  </li>
                  <li class="aside-filter__accordion-item">
                      <label class="aside-filter__accordion-label" for="payments2">
                        <input id="payments2" class="aside-filter__accordion-check" name="payments" type="checkbox">
                        Payoneer
                      </label>
                  </li>
                  <li class="aside-filter__accordion-item">
                      <label class="aside-filter__accordion-label" for="payments3">
                        <input id="payments3" class="aside-filter__accordion-check" name="payments" type="checkbox">
                        Fondy
                      </label>
                  </li>
                </ul>
              </div>
                <button class="aside-filter__accordion-btn" id="search-btn">Select</button>
            </div>
          </aside>
{% endblock left_menu%}

{% block content %}
                <div class="content__inner">
                   <div class="content__top">
                       <h1 class="title content__top-title">Invoices history</h1>
                       <div class="content__top-search">
                           <img class="content__top-img" src="{% static 'images/main/Search.svg' %}" alt="Search">
                           <input class="content__top-input" type="text" id="search-input" placeholder="Search">
                       </div>
                   </div>

                    <button class="content__filter-btn" type="button">
                        <img class="content__filter-img" src="{% static 'images/filter-btn.svg' %}" alt="filter-icon">
                        Filter
                    </button>

                    <ul class="content__titles">
                        <li class="content__titles-item">
                            Invoice
                        </li>
                        <li class="content__titles-item">
                            Invoice Date
                        </li>
                        <li class="content__titles-item">
                            Due Date
                        </li>
                        <li class="content__titles-item">
                            Total
                        </li>
                        <li class="content__titles-item">
                            Status
                        </li>
                    </ul>

            {% for invoice_date in invoices_dates %}
                <div class="content__body">
                  <p class="content__body-titleDate">{{ invoice_date }}</p>
                  <ul class="content__body-list" >
                    {% for invoice in invoices %}
                      {% if invoice.date == invoice_date %}
                      <li  class="content__body-box" >
                      <ul class="content__body-titles" id="list">
                        <li class="content__body-title">Invoice</li>
                        <li class="content__body-title">Status</li>
                        <li class="content__body-title">Invoice Date</li>
                        <li class="content__body-title">Due Date</li>
                        <li class="content__body-title">Total</li>
                      </ul>
                      <ul class="content__body-items" id="list">
                          <p class="content__body-number">{{ invoice.id }}</p>
                          <li  class="content__body-item style--width">
                              <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}" target="_blank">
                                  <img src="{% static 'images/invoices/print.svg' %}"  alt="print"></a>
                              <a class="content__body-link" href="{% url 'invoice_detail' invoice.id %}">
                                  <p class="content__body-invoice" >{{ invoice.invoice_id }}</p></a>
                        </li>
                        <li  class="content__body-item style--width">
                             <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}"  target="_blank">
                             <p class="content__body-date">{{ invoice.date }}</p></a>
                        </li>
                        <li  class="content__body-item style--width">
                             <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}"  target="_blank">
                             <p class="content__body-date">{{ invoice.due_date }}</p></a>
                        </li>
                        <li  class="content__body-item style--width">
                            <a class="content__body-link" href="{% url 'create_invoice_pdf' invoice.id %}"  target="_blank">
                            <p class="content__body-money">{{ invoice.price }}</p></a>
                        </li>
                        <li  class="content__body-item style--width">
                            {% if invoice.status == 'Paid'  %}
                                <p class="content__body-status style--width font--green">Paid</p>
                            {% elif  invoice.status == 'Unpaid' %}
                                <p class="content__body-status style--width font--yellow">Unpaid</p>
                            {% elif invoice.status == 'Canceled'  %}
                                <p class="content__body-status style--width font--red">Cancelled</p>
                            {% elif invoice.status == 'Refunded'%}
                                <p class="content__body-status style--width font--blue">Refunded</p>
                            {% elif invoice.status == 'New' %}
                                <p class="content__body-status style--width font--blue">New</p>
                            {% else %}
                         <p class="content__body-status style--width font--yellow">{{ invoice.status }}</p>
                        {% endif %}
                        </li>
                      </ul>
                       <button class="content__body-btn">
                        <img class="content__body-img" src="{% static 'images/chevron.svg' %}" alt="arrow">
                        </button>
                    </li>
                        {% endif %}
                      {% endfor %}
                  </ul>
                </div>
            {% endfor %}
            </div>

            <div id="content__showing-box" class="content__showing-box">
                <p class="content__showing-text">Showing</p>
                <p id="content__showing-number" class="content__showing-number">
                    {% if invoices_number < 10 %}
                        {{ invoices_number }}
                    {% else %}
                        10
                    {% endif %}
                </p>
                <img class="content__showing-img" src="{% static 'images/invoices/arrow-drop-down.svg' %}" alt="icon">
                <p class="content__showing-numbers">of {{ invoices_number }}</p>
                <ul id="content__showing-list" class="content__showing-list">
                    {% if invoices_number < 10 %}
                        <li class="content__showing-item">{{ invoices_number }}</li>
                    {% elif invoices_number > 10 %}
                        <li class="content__showing-item">10</li>
                        <li class="content__showing-item">All</li>
                    {% elif invoices_number > 50 %}
                        <li class="content__showing-item">10</li>
                        <li class="content__showing-item">50</li>
                        <li class="content__showing-item">All</li>
                    {% elif invoices_number > 100 %}
                        <li class="content__showing-item">10</li>
                        <li class="content__showing-item">50</li>
                        <li class="content__showing-item">100</li>
                        <li class="content__showing-item">All</li>
                    {% endif %}
                </ul>
              </div>
        </div>
    </div>
</main>
{% endblock content %}

{% block extra_js %}
<script src="{% static 'js/jquery-3.6.4.min.js' %}"></script>
<script src="{% static 'js/jquery-ui.min.js' %}"></script>
<script src="{% static 'js/dynamic_search.js' %}"></script>
<script src="{% static 'js/invoices.js' %}"></script>
<script src="{% static 'js/calendar.js' %}"></script>
{% endblock extra_js %}
